(self.webpackChunkmetaverse_experience=self.webpackChunkmetaverse_experience||[]).push([[631],{8551:(t,e,n)=>{n(2273),n(797),n(7127),n(3509),n(5005)},708:t=>{t.exports=Object.assign((function(){}),{FACE_1:0,FACE_2:1,FACE_3:2,FACE_4:3,L_SHOULDER_1:4,R_SHOULDER_1:5,L_SHOULDER_2:6,R_SHOULDER_2:7,SELECT:8,START:9,DPAD_UP:12,DPAD_DOWN:13,DPAD_LEFT:14,DPAD_RIGHT:15,VENDOR:16})},5478:t=>{t.exports=function(t,e,n){this.type=t,this.index=e,this.pressed=n.pressed,this.value=n.value}},8123:t=>{function e(t){const e=document.getElementById(t),n=e.parentNode;try{n&&n.removeChild(e)}catch(t){}}function n(t,n,o){return new o((function(o,s){const i=n.timeout||5e3,c="script_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),r=function(t,e){var n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.id=e,n.src=t,n}(t,c),a=setTimeout((function(){s(new Error("Script request to "+t+" timed out")),e(c)}),i),h=function(t){clearTimeout(t)};r.addEventListener("load",(function(t){o({ok:!0}),h(a),e(c)})),r.addEventListener("error",(function(n){s(new Error("Script request to "+t+" failed "+n)),h(a),e(c)})),function(t){const e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}(r)}))}t.exports=function(t){return t=t||{},function(e,o){return n(e,o=o||{},t.Promise||Promise)}}},8534:t=>{t.exports=AFRAME.registerComponent("checkpoint-controls",{schema:{enabled:{default:!0},mode:{default:"teleport",oneOf:["teleport","animate"]},animateSpeed:{default:3}},init:function(){this.active=!0,this.checkpoint=null,this.isNavMeshConstrained=!1,this.offset=new THREE.Vector3,this.position=new THREE.Vector3,this.targetPosition=new THREE.Vector3},play:function(){this.active=!0},pause:function(){this.active=!1},setCheckpoint:function(t){const e=this.el;this.active&&this.checkpoint!==t&&(this.checkpoint&&e.emit("navigation-end",{checkpoint:this.checkpoint}),this.checkpoint=t,this.sync(),this.position.distanceTo(this.targetPosition)<.1?this.checkpoint=null:(e.emit("navigation-start",{checkpoint:t}),"teleport"===this.data.mode&&(this.el.setAttribute("position",this.targetPosition),this.checkpoint=null,e.emit("navigation-end",{checkpoint:t}),e.components["movement-controls"].updateNavLocation())))},isVelocityActive:function(){return!(!this.active||!this.checkpoint)},getVelocity:function(){if(!this.active)return;const t=this.data,e=this.offset,n=this.position,o=this.targetPosition,s=this.checkpoint;return this.sync(),n.distanceTo(o)<.1?(this.checkpoint=null,this.el.emit("navigation-end",{checkpoint:s}),e.set(0,0,0)):(e.setLength(t.animateSpeed),e)},sync:function(){const t=this.offset,e=this.position,n=this.targetPosition;e.copy(this.el.getAttribute("position")),this.checkpoint.object3D.getWorldPosition(n),n.add(this.checkpoint.components.checkpoint.getOffset()),t.copy(n).sub(e)}})},573:(t,e,n)=>{const o=n(708),s=n(5478),i=.2,c="left",r="right",a=1,h=2;t.exports=AFRAME.registerComponent("gamepad-controls",{GamepadButton:o,schema:{enabled:{default:!0},rotationSensitivity:{default:2}},init:function(){const t=this.el.sceneEl;this.system=t.systems["tracked-controls-webxr"]||{controllers:[]},this.prevTime=window.performance.now(),this.buttons={};const e=this.el.object3D.rotation;this.pitch=new THREE.Object3D,this.pitch.rotation.x=e.x,this.yaw=new THREE.Object3D,this.yaw.position.y=10,this.yaw.rotation.y=e.y,this.yaw.add(this.pitch),this._lookVector=new THREE.Vector2,this._moveVector=new THREE.Vector2,this._dpadVector=new THREE.Vector2,t.addBehavior(this)},update:function(){this.tick()},tick:function(t,e){this.updateButtonState(),this.updateRotation(e)},remove:function(){},isVelocityActive:function(){if(!this.data.enabled||!this.isConnected())return!1;const t=this._dpadVector,e=this._moveVector;this.getDpad(t),this.getJoystick(a,e);const n=t.x||e.x,o=t.y||e.y;return Math.abs(n)>i||Math.abs(o)>i},getVelocityDelta:function(){const t=this._dpadVector,e=this._moveVector;this.getDpad(t),this.getJoystick(a,e);const n=t.x||e.x,o=t.y||e.y,s=new THREE.Vector3;return Math.abs(n)>i&&(s.x+=n),Math.abs(o)>i&&(s.z+=o),s},isRotationActive:function(){if(!this.data.enabled||!this.isConnected())return!1;const t=this._lookVector;return this.getJoystick(h,t),Math.abs(t.x)>i||Math.abs(t.y)>i},updateRotation:function(t){if(!this.isRotationActive())return;const e=this.data,n=this.yaw,o=this.pitch;n.rotation.y=this.el.object3D.rotation.y,o.rotation.x=this.el.object3D.rotation.x;const s=this._lookVector;this.getJoystick(h,s),Math.abs(s.x)<=i&&(s.x=0),Math.abs(s.y)<=i&&(s.y=0),s.multiplyScalar(e.rotationSensitivity*t/1e3),n.rotation.y-=s.x,o.rotation.x-=s.y,o.rotation.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,o.rotation.x)),this.el.object3D.rotation.set(o.rotation.x,n.rotation.y,0)},updateButtonState:function(){const t=this.getGamepad(r);if(this.data.enabled&&t)for(var e=0;e<t.buttons.length;e++)t.buttons[e].pressed&&!this.buttons[e]?this.emit(new s("gamepadbuttondown",e,t.buttons[e])):!t.buttons[e].pressed&&this.buttons[e]&&this.emit(new s("gamepadbuttonup",e,t.buttons[e])),this.buttons[e]=t.buttons[e].pressed;else Object.keys(this.buttons)&&(this.buttons={})},emit:function(t){this.el.emit(t.type,t),this.el.emit(t.type+":"+t.index,new s(t.type,t.index,t))},getGamepad:function(){const t=[],e=[];return function(n){const o=this.el.sceneEl.components["proxy-controls"],s=o&&o.isConnected()&&o.getGamepad(0);if(s)return s;t.length=0;for(let e=0;e<this.system.controllers.length;e++){const o=this.system.controllers[e],s=o?o.gamepad:null;if(t.push(s),s&&o.handedness===n)return s}const i=navigator.getGamepads?navigator.getGamepads():e;for(let t=0;t<i.length;t++){const e=i[t];if(e&&e.hand===n)return e}return t[0]||i[0]}}(),getButton:function(t){return this.getGamepad(r).buttons[t]},getAxis:function(t){return this.getGamepad(t>1?r:c).axes[t]},getJoystick:function(t,e){const n=this.getGamepad(t===a?c:r);if(!n)return e.set(0,0);if("xr-standard"===n.mapping)switch(t){case a:return e.set(n.axes[2],n.axes[3]);case h:return e.set(n.axes[2],0)}else switch(t){case a:return e.set(n.axes[0],n.axes[1]);case h:return e.set(n.axes[2],n.axes[3])}throw new Error('Unexpected joystick index "%d".',t)},getDpad:function(t){const e=this.getGamepad(c);return e&&e.buttons[o.DPAD_RIGHT]?t.set((e.buttons[o.DPAD_RIGHT].pressed?1:0)+(e.buttons[o.DPAD_LEFT].pressed?-1:0),(e.buttons[o.DPAD_UP].pressed?-1:0)+(e.buttons[o.DPAD_DOWN].pressed?1:0)):t.set(0,0)},isConnected:function(){const t=this.getGamepad(c);return!(!t||!t.connected)},getID:function(){return this.getGamepad(c).id}})},2273:(t,e,n)=>{n(8534),n(573),n(8591),n(8629),n(8787),n(8728),n(3246)},47:(t,e,n)=>{"use strict";n.d(e,{s:()=>a});var o=n(5553);function s(t,e,n){const o=n.length-t-1;if(e>=n[o])return o-1;if(e<=n[t])return t;let s=t,i=o,c=Math.floor((s+i)/2);for(;e<n[c]||e>=n[c+1];)e<n[c]?i=c:s=c,c=Math.floor((s+i)/2);return c}function i(t,e,n,o){const s=[],i=[],c=[];s[0]=1;for(let r=1;r<=n;++r){i[r]=e-o[t+1-r],c[r]=o[t+r]-e;let n=0;for(let t=0;t<r;++t){const e=c[t+1],o=i[r-t],a=s[t]/(e+o);s[t]=n+e*a,n=o*a}s[r]=n}return s}function c(t,e){let n=1;for(let e=2;e<=t;++e)n*=e;let o=1;for(let t=2;t<=e;++t)o*=t;for(let n=2;n<=t-e;++n)o*=n;return n/o}function r(t,e,n,i,r){const a=function(t,e,n,i,c){const r=c<t?c:t,a=[],h=s(t,i,e),u=function(t,e,n,o,s){const i=[];for(let t=0;t<=n;++t)i[t]=0;const c=[];for(let t=0;t<=o;++t)c[t]=i.slice(0);const r=[];for(let t=0;t<=n;++t)r[t]=i.slice(0);r[0][0]=1;const a=i.slice(0),h=i.slice(0);for(let o=1;o<=n;++o){a[o]=e-s[t+1-o],h[o]=s[t+o]-e;let n=0;for(let t=0;t<o;++t){const e=h[t+1],s=a[o-t];r[o][t]=e+s;const i=r[t][o-1]/r[o][t];r[t][o]=n+e*i,n=s*i}r[o][o]=n}for(let t=0;t<=n;++t)c[0][t]=r[t][n];for(let t=0;t<=n;++t){let e=0,s=1;const a=[];for(let t=0;t<=n;++t)a[t]=i.slice(0);a[0][0]=1;for(let i=1;i<=o;++i){let o=0;const h=t-i,u=n-i;t>=i&&(a[s][0]=a[e][0]/r[u+1][h],o=a[s][0]*r[h][u]);const l=t-1<=u?i-1:n-t;for(let t=h>=-1?1:-h;t<=l;++t)a[s][t]=(a[e][t]-a[e][t-1])/r[u+1][h+t],o+=a[s][t]*r[h+t][u];t<=u&&(a[s][i]=-a[e][i-1]/r[u+1][t],o+=a[s][i]*r[t][u]),c[i][t]=o;const d=e;e=s,s=d}}let u=n;for(let t=1;t<=o;++t){for(let e=0;e<=n;++e)c[t][e]*=u;u*=n-t}return c}(h,i,t,r,e),l=[];for(let t=0;t<n.length;++t){const e=n[t].clone(),o=e.w;e.x*=o,e.y*=o,e.z*=o,l[t]=e}for(let e=0;e<=r;++e){const n=l[h-t].clone().multiplyScalar(u[e][0]);for(let o=1;o<=t;++o)n.add(l[h-t+o].clone().multiplyScalar(u[e][o]));a[e]=n}for(let t=r+1;t<=c+1;++t)a[t]=new o.IUQ(0,0,0);return a}(t,e,n,i,r);return function(t){const e=t.length,n=[],s=[];for(let i=0;i<e;++i){const e=t[i];n[i]=new o.Pq0(e.x,e.y,e.z),s[i]=e.w}const i=[];for(let t=0;t<e;++t){const e=n[t].clone();for(let n=1;n<=t;++n)e.sub(i[t-n].clone().multiplyScalar(c(t,n)*s[n]));i[t]=e.divideScalar(s[0])}return i}(a)}class a extends o.Ipv{constructor(t,e,n,s,i){super(),this.degree=t,this.knots=e,this.controlPoints=[],this.startKnot=s||0,this.endKnot=i||this.knots.length-1;for(let t=0;t<n.length;++t){const e=n[t];this.controlPoints[t]=new o.IUQ(e.x,e.y,e.z,e.w)}}getPoint(t,e=new o.Pq0){const n=e,c=this.knots[this.startKnot]+t*(this.knots[this.endKnot]-this.knots[this.startKnot]),r=function(t,e,n,c){const r=s(t,c,e),a=i(r,c,t,e),h=new o.IUQ(0,0,0,0);for(let e=0;e<=t;++e){const o=n[r-t+e],s=a[e],i=o.w*s;h.x+=o.x*i,h.y+=o.y*i,h.z+=o.z*i,h.w+=o.w*s}return h}(this.degree,this.knots,this.controlPoints,c);return 1!==r.w&&r.divideScalar(r.w),n.set(r.x,r.y,r.z)}getTangent(t,e=new o.Pq0){const n=e,s=this.knots[0]+t*(this.knots[this.knots.length-1]-this.knots[0]),i=r(this.degree,this.knots,this.controlPoints,s,1);return n.copy(i[1]).normalize(),n}}}}]);